<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SpringBoot | Levi_Bee's World!</title><meta name="keywords" content="SpringBoot,Spring"><meta name="author" content="Levi_Bee"><meta name="copyright" content="Levi_Bee"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SpringBoot学习 1、原理初探pom.xml  Spring-boot-dependencies : 核心依赖在父工程中！ 我们在写或者引入一些Springboot依赖的时候，不需要制定版本，就因为有这些版本仓库  启动器  &#96;&#96;&#96;xml  org.springframework.boot spring-boot-starter-test test  - 启动器：说白了就是springbo">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot">
<meta property="og:url" content="http://example.com/2022/05/17/Spring/SpringBoot%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Levi_Bee&#39;s World!">
<meta property="og:description" content="SpringBoot学习 1、原理初探pom.xml  Spring-boot-dependencies : 核心依赖在父工程中！ 我们在写或者引入一些Springboot依赖的时候，不需要制定版本，就因为有这些版本仓库  启动器  &#96;&#96;&#96;xml  org.springframework.boot spring-boot-starter-test test  - 启动器：说白了就是springbo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b">
<meta property="article:published_time" content="2022-05-17T03:00:00.000Z">
<meta property="article:modified_time" content="2022-05-17T02:53:22.545Z">
<meta property="article:author" content="Levi_Bee">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="http://example.com/2022/05/17/Spring/SpringBoot%E5%AD%A6%E4%B9%A0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SpringBoot',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-17 10:53:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/mycss.css"><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/IMG_5475.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/upadte/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> Myself</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Levi_Bee's World!</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/upadte/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> Myself</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringBoot</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-17T03:00:00.000Z" title="发表于 2022-05-17 11:00:00">2022-05-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-17T02:53:22.545Z" title="更新于 2022-05-17 10:53:22">2022-05-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SpringBoot"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SpringBoot学习"><a href="#SpringBoot学习" class="headerlink" title="SpringBoot学习"></a>SpringBoot学习</h2><p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/watermark%252Ctype_ZmFuZ3poZW5naGVpdGk%252Cshadow_10%252Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4MTI5MDYy%252Csize_16%252Ccolor_FFFFFF%252Ct_70.png" alt="在这里插入图片描述"></p>
<h4 id="1、原理初探"><a href="#1、原理初探" class="headerlink" title="1、原理初探"></a>1、原理初探</h4><p><strong>pom.xml</strong></p>
<ul>
<li>Spring-boot-dependencies : 核心依赖在父工程中！</li>
<li>我们在写或者引入一些Springboot依赖的时候，不需要制定版本，就因为有这些版本仓库</li>
</ul>
<p><strong>启动器</strong></p>
<ul>
<li><p>```xml</p>
<dependency>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-test</artifactId>
<scope>test</scope>
</dependency>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 启动器：说白了就是springboot的启动场景</span><br><span class="line"></span><br><span class="line">- spring-boot-starter-test-web，他会帮我们自动导入web环境所有的依赖！</span><br><span class="line"></span><br><span class="line">- springboot会将所有的工程场景，都变成一个个的启动器</span><br><span class="line"></span><br><span class="line">- 我们要用什么，只需要找到对应的启动器就可以了，`starter`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**主程序**</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">//@SpringBootApplication :标注这个类是一个springboot的应用 </span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class LeviApplication &#123;</span><br><span class="line">    </span><br><span class="line">    //将springboot应用启动</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(LeviApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>注解 </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span> ：springboot的配置</span><br><span class="line"><span class="meta">@Configuration</span> ：spring 配置类</span><br><span class="line"><span class="meta">@Component</span> ：说明这也是一个spring的组件</span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span> ：自动配置</span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span> ：自动配置包</span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span>：导入选择器</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>==结论：==</p>
<p>Springboot 所有自动配置都是在启动的时候扫描并加载的：<code>spring.factories</code>所有自动配置类都在这里面，但不一定生效，需要判断条件是否成立，只要导入了对应的start，就有对应的启动器了，有了启动器，我们自动装配就会生效，然后配置成功！</p>
<p>![截屏2021-10-07 下午4.02.08](SpringBoot学习.assets/截屏2021-10-07 下午4.02.08.png)</p>
<h4 id="2、yaml"><a href="#2、yaml" class="headerlink" title="2、yaml"></a>2、yaml</h4><p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-09%20%E4%B8%8B%E5%8D%882.51.03.png" alt="截屏2021-10-09 下午2.51.03"></p>
<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-09%20%E4%B8%8B%E5%8D%882.54.38.png" alt="截屏2021-10-09 下午2.54.38"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="comment">//用于绑定实体类</span></span><br><span class="line"><span class="comment">//@ConfigurationProperties作用：</span></span><br><span class="line"><span class="comment">//    将配置文件中配置的每一个属性的值，映射到这个组件中；</span></span><br><span class="line"><span class="comment">//    告诉springboot将本类中的所有属性和配置文件中的相关的配置进行绑定</span></span><br><span class="line"><span class="comment">//    参数 prefix - “person” ：将配置文件中的person下面的所有属性进行一一对应</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    只有这个组件是容器中的组件，才能使用容器提供的@ConfigurationProperties功能</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-09%20%E4%B8%8B%E5%8D%883.07.21.png" alt="截屏2021-10-09 下午3.07.21"></p>
<p>==@ConfigurationProperties(prefix = “person”)用于绑定实体类==</p>
<p>==yml可以直接给实体类进行赋值==</p>
<p> <img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-09%20%E4%B8%8B%E5%8D%884.15.39.png" alt="截屏2021-10-09 下午4.15.39"></p>
<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-09%20%E4%B8%8B%E5%8D%884.28.33.png" alt="截屏2021-10-09 下午4.28.33"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在我们这配置文件中能配置的东西，都存在一个固有的规律</span></span><br><span class="line"><span class="comment">// xxxAutoConfiguration: 默认值   </span></span><br><span class="line"><span class="comment">// xxxProperties 和配置文件绑定，我们就可以使用自定义的配置了！</span></span><br></pre></td></tr></table></figure>



<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2021-10-10%20%E4%B8%8A%E5%8D%8811.28.22.png" alt="截屏2021-10-10 上午11.28.22"></p>
<h4 id="3、SpringBoot-Web开发"><a href="#3、SpringBoot-Web开发" class="headerlink" title="3、SpringBoot Web开发"></a>3、SpringBoot Web开发</h4><h5 id="3-1、静态资源"><a href="#3-1、静态资源" class="headerlink" title="3.1、静态资源"></a>3.1、静态资源</h5><p> ==总结：==</p>
<ol>
<li><p>在springboot中，我们可以使用以下方式处理静态资源</p>
<ul>
<li>webjars <code>lcoalhost:8080/webjars/</code></li>
<li>public, staic, /**, ressources  <code>localhost:8080/</code></li>
</ul>
</li>
<li><p>优先级：</p>
<p> resources &gt; static (默认)&gt; public</p>
</li>
</ol>
<h5 id="3-2、-模版引擎"><a href="#3-2、-模版引擎" class="headerlink" title="3.2、 模版引擎"></a>3.2、 模版引擎</h5><p>![截屏2021-10-10 下午5.17.55](SpringBoot学习.assets/截屏2021-10-10 下午5.17.55.png)</p>
<p>==结论：==</p>
<ul>
<li>只要需要使用thymeleaf，只需要导入对应的依赖就可以了！我们将html放在我们的templates目录下即可！</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demoweb.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.View;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="comment">//如果想自己diy一些定制化的功能，只要写这个组件，然后将它交给springboot，他会帮我们自动装配！</span></span><br><span class="line"><span class="comment">//拓展springmvc dispatchservlet</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ViewResolver 实现视图解析器接口的类，我们就可以把它看作视图解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewResolver <span class="title">myViewResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyViewResolver();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自定义一个自己的视图解析器MyViewResolver</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyViewResolver</span> <span class="keyword">implements</span> <span class="title">ViewResolver</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> View <span class="title">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-3、springmvc配置"><a href="#3-3、springmvc配置" class="headerlink" title="3.3、springmvc配置"></a>3.3、springmvc配置</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//官方指定的拓展springmvc方式！</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>&#123;</span><br><span class="line">    <span class="comment">//视图跳转</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/levi&quot;</span>).setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//官方指定的拓展springmvc方式！</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span> <span class="comment">//导入一个：DelegatingWebMvcConfiguration:xc从容器中获取所有的webmvcconfig</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>&#123;</span><br><span class="line">    <span class="comment">//视图跳转</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/levi&quot;</span>).setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>在springboot中，有非常多的xxxx Configuration帮助我们进行拓展配置，只要看见了这个东西，我们就要注意了！</strong></p>
<h4 id="4、员工管理系统"><a href="#4、员工管理系统" class="headerlink" title="4、员工管理系统"></a>4、员工管理系统</h4><ul>
<li>首页配置：<ul>
<li>==注意点：==所有页面的静态资源都需要使用thymeleaf接管；—&gt;<code>@&#123;&#125;</code></li>
<li>==url==:<code>@&#123;&#125;</code></li>
</ul>
</li>
<li>页面国际话（即中英文切换）：<ul>
<li>我们需要配置i18n文件</li>
<li>我们如果需要在项目中进行按钮的自动切换，我们需要自定义一个组件<code>LocalResolver</code></li>
<li>记得将自己写的组件配置到spring容器中即<code>@Bean</code>中</li>
</ul>
</li>
<li>#{}</li>
</ul>
<h3 id="5、整合JDBC"><a href="#5、整合JDBC" class="headerlink" title="5、整合JDBC"></a>5、整合JDBC</h3><h4 id="1、新建一个新的项目"><a href="#1、新建一个新的项目" class="headerlink" title="1、新建一个新的项目"></a>1、新建一个新的项目</h4><ul>
<li>勾选相应的依赖</li>
</ul>
<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-14%20%E4%B8%8B%E5%8D%885.45.35.png" alt="截屏2022-01-14 下午5.45.35"></p>
<h3 id="6、SpringSecurity（安全）"><a href="#6、SpringSecurity（安全）" class="headerlink" title="6、SpringSecurity（安全）"></a>6、SpringSecurity（安全）</h3><h4 id="6-1、用户认证和授权"><a href="#6-1、用户认证和授权" class="headerlink" title="6.1、用户认证和授权"></a>6.1、用户认证和授权</h4><ul>
<li>做网站时安全应该在设计之初的时候考虑</li>
<li>Shri o、SpringSecurity：风格很相似，用于认证、授权</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//链式编程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//首页所有人都可以访问，功能也只有对应有权限的人才能访问</span></span><br><span class="line">        <span class="comment">//请求授权的规则</span></span><br><span class="line">        http.authorizeHttpRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level1/**&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level2/**&quot;</span>).hasRole(<span class="string">&quot;vip2&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level3/**&quot;</span>).hasRole(<span class="string">&quot;vip3&quot;</span>);</span><br><span class="line">      </span><br><span class="line">        <span class="comment">//没有权限默认会到登录页面，需要开启登录的页面</span></span><br><span class="line">        http.formLogin();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>==报错：403（没有权限）==</p>
<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-18%20%E4%B8%8B%E5%8D%8812.05.39.png" alt="截屏2022-01-18 下午12.05.39"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Project</span> ：SpringBoot-Security</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@IDE</span> ：IntelliJ IDEA</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> ：Levi_Bee</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> ：2022/1/18 11:07 上午</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.lv.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//授权</span></span><br><span class="line">    <span class="comment">//链式编程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//首页所有人都可以访问，功能也只有对应有权限的人才能访问</span></span><br><span class="line">        <span class="comment">//请求授权的规则</span></span><br><span class="line">        http.authorizeHttpRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level1/**&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level2/**&quot;</span>).hasRole(<span class="string">&quot;vip2&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level3/**&quot;</span>).hasRole(<span class="string">&quot;vip3&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//没有权限默认会到登录页面</span></span><br><span class="line">        http.formLogin();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//认证</span></span><br><span class="line">    <span class="comment">//and()可以拼接用户</span></span><br><span class="line">    <span class="comment">//密码编码：PasswordEncoder</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//这些数据应该从数据库得到</span></span><br><span class="line">        auth.inMemoryAuthentication().passwordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder())</span><br><span class="line">                .withUser(<span class="string">&quot;lv&quot;</span>).password(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip2&quot;</span>, <span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">&quot;root&quot;</span>).password(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>, <span class="string">&quot;vip2&quot;</span>, <span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">&quot;guest&quot;</span>).password(<span class="keyword">new</span> BCryptPasswordEncoder().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>分配权限进行登录</strong></li>
</ul>
<h4 id="6-2、注销以及权限控制"><a href="#6-2、注销以及权限控制" class="headerlink" title="6.2、注销以及权限控制"></a>6.2、注销以及权限控制</h4><ul>
<li>注销</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//注销,开启了注销功能，注销跳转到index页面</span></span><br><span class="line">http.logout().logoutSuccessUrl(<span class="string">&quot;/index&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>关闭csrf ==如果没有关闭可能是登录失败报错404的原因==</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//防止网站工具：get,post</span></span><br><span class="line">http.csrf().disable();<span class="comment">//关闭csrf功能</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取当前登录用户名以及角色，并且实现注销</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right menu&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--如果未登录--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;!isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 登录</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--如果已经登录，显示用户名和用户名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> &gt;</span></span><br><span class="line">                用户名：<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                角色：<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;principal.authorities&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;sign-out icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 注销</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--已登录</span></span><br><span class="line"><span class="comment">        &lt;a th:href=&quot;@&#123;/usr/toUserCenter&#125;&quot;&gt;</span></span><br><span class="line"><span class="comment">            &lt;i class=&quot;address card icon&quot;&gt;&lt;/i&gt; admin</span></span><br><span class="line"><span class="comment">        &lt;/a&gt;</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>分配权限</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;hasRole(&#x27;vip3&#x27;)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-18%20%E4%B8%8B%E5%8D%882.59.28.png" alt="截屏2022-01-18 下午2.59.28"></p>
<h4 id="6-3、记住我以及首页定制"><a href="#6-3、记住我以及首页定制" class="headerlink" title="6.3、记住我以及首页定制"></a>6.3、记住我以及首页定制</h4><ul>
<li>开启记住我</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//开启记住我功能</span></span><br><span class="line">http.rememberMe();</span><br></pre></td></tr></table></figure>

<ul>
<li>定制登录页面</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定制登录页面</span></span><br><span class="line">        http.formLogin().loginPage(<span class="string">&quot;/toLogin&quot;</span>).usernameParameter(<span class="string">&quot;username&quot;</span>).passwordParameter(<span class="string">&quot;password&quot;</span>).loginProcessingUrl(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui left icon input&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;user icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ui left icon input&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;lock icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span>&gt;</span>记住我</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ui blue submit button&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>对于定制页面的<strong>记住我</strong>功能</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span>&gt;</span>记住我</span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//开启记住我功能,cookies,默认保存两周,自定义接收前端的参数</span></span><br><span class="line">http.rememberMe().rememberMeParameter(<span class="string">&quot;remember&quot;</span>);</span><br></pre></td></tr></table></figure>



<h3 id="7、Shiro"><a href="#7、Shiro" class="headerlink" title="7、Shiro"></a>7、Shiro</h3><h4 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h4><h5 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h5><p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Apache&spm=1001.2101.3001.7020">Apache</a> Shiro是一个强大且易用的Java安全框架</p>
<p>可以完成身份验证、授权、密码和会话管理</p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Shiro&spm=1001.2101.3001.7020">Shiro</a> 不仅可以用在 JavaSE 环境中，也可以用在 JavaEE 环境中</p>
<p>官网： <a target="_blank" rel="noopener" href="http://shiro.apache.org/">http://shiro.apache.org/</a></p>
<h5 id="2-功能"><a href="#2-功能" class="headerlink" title="2. 功能"></a>2. 功能</h5><p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/watermark%252Ctype_ZmFuZ3poZW5naGVpdGk%252Cshadow_10%252Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDQ0OTgzOA%253D%253D%252Csize_16%252Ccolor_FFFFFF%252Ct_70.png" alt="在这里插入图片描述"></p>
<ul>
<li><p>==Authentication==：身份认证/登录，验证用户是不是拥有相应的身份；</p>
</li>
<li><p>==Authorization==：授权，即权限验证，验证某个已认证的用户是否拥有某个权限；即判断用户是否能做事情，常见的如：验证某个用户是否拥有某个角色。或者细粒度的验证某个用户对某个资源是否具有某个权限；</p>
</li>
<li><p>==Session Manage==r：会话管理，即用户登录后就是一次会话，在没有退出之前，它的所有信息都在会话中；会话可以是普通JavaSE环境的，也可以是如Web环境的；</p>
</li>
<li><p>==Cryptography==：加密，保护数据的安全性，如密码加密存储到数据库，而不是明文存储；</p>
</li>
<li><p>==Web Support==：Web支持，可以非常容易的集成到Web环境；</p>
</li>
<li><p>==Caching==：缓存，比如用户登录后，其用户信息、拥有的角色/权限不必每次去查，这样可以提高效率；</p>
</li>
<li><p>==Concurrency==：shiro支持多线程应用的并发验证，即如在一个线程中开启另一个线程，能把权限自动传播过去；</p>
</li>
<li><p>==Testing==：提供测试支持；</p>
</li>
<li><p> ==Run As==：允许一个用户假装为另一个用户（如果他们允许）的身份进行访问；</p>
</li>
<li><p>==Remember Me==：记住我，这个是非常常见的功能，即一次登录后，下次再来的话不用登录了。</p>
</li>
</ul>
<h5 id="3-从外部看"><a href="#3-从外部看" class="headerlink" title="3. 从外部看"></a>3. 从外部看</h5><p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/watermark%252Ctype_ZmFuZ3poZW5naGVpdGk%252Cshadow_10%252Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDQ0OTgzOA%253D%253D%252Csize_16%252Ccolor_FFFFFF%252Ct_70-20220127210826842.png" alt="在这里插入图片描述"></p>
<p>应用代码直接交互的对象是Subject，也就是说==Shiro的对外API核心就是Subject==；其每个API的含义：</p>
<ul>
<li><p>Subject：主体，代表了当前“用户”，这个用户不一定是一个具体的人，与当前应用交互的任何东西都是Subject，如网络爬虫，机器人等；即一个抽象概念；所有Subject都绑定到SecurityManager，与Subject的所有交互都会委托给SecurityManager；可以把Subject认为是一个门面；SecurityManager才是实际的执行者；</p>
</li>
<li><p>SecurityManager：安全管理器；即所有与安全有关的操作都会与SecurityManager交互；且它管理着所有Subject；可以看出它是Shiro的核心，它负责与后边介绍的其他组件进行交互，如果学习过SpringMVC，你可以把它看成DispatcherServlet前端控制器；</p>
</li>
<li><p>Realm：域，Shiro从从Realm获取安全数据（如用户、角色、权限），就是说SecurityManager要验证用户身份，那么它需要从Realm获取相应的用户进行比较以确定用户身份是否合法；也需要从Realm得到用户相应的角色/权限进行验证用户是否能进行操作；可以把Realm看成DataSource，即安全数据源。</p>
</li>
</ul>
<blockquote>
<p>也就是说对于我们而言，最简单的一个Shiro应用：</p>
<p>应用代码通过Subject来进行认证和授权，而Subject又委托给SecurityManager；</p>
<p>我们需要给Shiro的SecurityManager注入Realm，从而让SecurityManager能得到合法的用户及其权限进行判断。</p>
<p>从以上也可以看出，==Shiro不提供维护用户/权限，而是通过Realm让开发人员自己注入==</p>
</blockquote>
<h5 id="4-认证流程"><a href="#4-认证流程" class="headerlink" title="4.认证流程"></a>4.认证流程</h5><p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/watermark%252Ctype_ZmFuZ3poZW5naGVpdGk%252Cshadow_10%252Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDQ0OTgzOA%253D%253D%252Csize_16%252Ccolor_FFFFFF%252Ct_70-20220127211010552.png" alt="在这里插入图片描述"></p>
<h5 id="5-分析案例"><a href="#5-分析案例" class="headerlink" title="5. 分析案例"></a>5. 分析案例</h5><p>==QuickStart.java==</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment"> * or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment"> * distributed with this work for additional information</span></span><br><span class="line"><span class="comment"> * regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment"> * to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment"> * &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment"> * with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment"> * software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment"> * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment"> * KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment"> * specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment"> * under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.SecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Simple Quickstart application showing how to use Shiro&#x27;s API.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 0.9 RC2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Quickstart</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> Logger log = LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The easiest way to create a Shiro SecurityManager with configured</span></span><br><span class="line">        <span class="comment">// realms, users, roles and permissions is to use the simple INI config.</span></span><br><span class="line">        <span class="comment">// We&#x27;ll do that by using a factory that can ingest a .ini file and</span></span><br><span class="line">        <span class="comment">// return a SecurityManager instance:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use the shiro.ini file at the root of the classpath</span></span><br><span class="line">        <span class="comment">// (file: and url: prefixes load from files and urls respectively):</span></span><br><span class="line">        Factory&lt;SecurityManager&gt; factory = <span class="keyword">new</span> IniSecurityManagerFactory(<span class="string">&quot;classpath:shiro.ini&quot;</span>);</span><br><span class="line">        SecurityManager securityManager = factory.getInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// for this simple example quickstart, make the SecurityManager</span></span><br><span class="line">        <span class="comment">// accessible as a JVM singleton.  Most applications wouldn&#x27;t do this</span></span><br><span class="line">        <span class="comment">// and instead rely on their container configuration or web.xml for</span></span><br><span class="line">        <span class="comment">// webapps.  That is outside the scope of this simple quickstart, so</span></span><br><span class="line">        <span class="comment">// we&#x27;ll just do the bare minimum so you can continue to get a feel</span></span><br><span class="line">        <span class="comment">// for things.</span></span><br><span class="line">        SecurityUtils.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Now that a simple Shiro environment is set up, let&#x27;s see what you can do:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        Subject currentUser = SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        Session session = currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        String value = (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">&quot;aValue&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Retrieved the correct value! [&quot;</span> + value + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let&#x27;s login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(<span class="string">&quot;lonestarr&quot;</span>, <span class="string">&quot;vespa&quot;</span>);</span><br><span class="line">            token.setRememberMe(<span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;There is no user with username of &quot;</span> + token.getPrincipal());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;Password for account &quot;</span> + token.getPrincipal() + <span class="string">&quot; was incorrect!&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;The account for username &quot;</span> + token.getPrincipal() + <span class="string">&quot; is locked.  &quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Please contact your administrator to unlock it.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">&quot;User [&quot;</span> + currentUser.getPrincipal() + <span class="string">&quot;] logged in successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;May the Schwartz be with you!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Hello, mere mortal.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;winnebago:drive:eagle5&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Here are the keys - have fun!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>通过 SecurityUtils 获取当前执行的用户 Subject</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Subject currentUser = SecurityUtils.getSubject();</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过 当前用户拿到 Session</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Session session = currentUser.getSession();</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>用 Session 存值取值</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">String value = (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>判断用户是否被认证</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.isAuthenticated()</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>执行登录操作</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.login(token);</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>打印其标识主体</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.getPrincipal()</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>注销</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">currentUser.logout();</span><br></pre></td></tr></table></figure>



<h4 id="二、-SpringBoot-集成-Shiro"><a href="#二、-SpringBoot-集成-Shiro" class="headerlink" title="二、 SpringBoot 集成 Shiro"></a>二、 SpringBoot 集成 Shiro</h4><h5 id="1-编写配置文件"><a href="#1-编写配置文件" class="headerlink" title="1. 编写配置文件"></a>1. 编写配置文件</h5><ol>
<li>在刚刚的父项目中新建一个 springboot 模块</li>
<li>导入 SpringBoot 和 Shiro 整合包的依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringBoot 和 Shiro 整合包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring-boot-web-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>下面是编写配置文件</p>
<blockquote>
<p>Shiro 三大要素</p>
<ol>
<li>subject -&gt; ShiroFilterFactoryBean</li>
<li>securityManager -&gt; DefaultWebSecurityManager</li>
<li>realm</li>
<li>==实际操作中对象创建的顺序 ： realm -&gt; securityManager -&gt; subject==</li>
</ol>
</blockquote>
</li>
<li><p>编写自定义的 realm ，需要继承 <code>AuthorizingRealm</code></p>
</li>
</ol>
<p>==UserRealm.java==</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRealm</span> <span class="keyword">extends</span> <span class="title">AuthorizingRealm</span> </span>&#123;</span><br><span class="line">    <span class="comment">//授权</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行了======》doGetAuthorizationInfo授权&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//认证</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行了======》doGetAuthorizationInfo认证&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>==ShiroConfig.java==</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShiroConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ShiroFilterFactoryBean:第三步</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">shiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;securityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span></span>&#123;</span><br><span class="line">        ShiroFilterFactoryBean bean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">        <span class="comment">//设置安全管理器</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DefaultWebSecurityManager:第二步</span></span><br><span class="line">    <span class="meta">@Bean(&quot;securityManager&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title">defaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span></span>&#123;</span><br><span class="line">        DefaultWebSecurityManager securityManager = <span class="keyword">new</span> DefaultWebSecurityManager();</span><br><span class="line">        <span class="comment">//关联UserRealm</span></span><br><span class="line">        securityManager.setRealm(userRealm);</span><br><span class="line">        <span class="keyword">return</span> securityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建realm对象，需要自定义类:第一步</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserRealm <span class="title">userRealm</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserRealm();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-Shiro实现登录拦截"><a href="#2-Shiro实现登录拦截" class="headerlink" title="2.Shiro实现登录拦截"></a>2.Shiro实现登录拦截</h5><blockquote>
<p>修改ShiroConfig.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean(name = &quot;shiroFilterFactoryBean&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title">getShiroFilterFactoryBean</span><span class="params">( DefaultWebSecurityManager defaultWebSecurityManager )</span></span>&#123;</span><br><span class="line">    ShiroFilterFactoryBean bean = <span class="keyword">new</span> ShiroFilterFactoryBean();</span><br><span class="line">    <span class="comment">//设置安全管理器</span></span><br><span class="line">    bean.setSecurityManager(defaultWebSecurityManager);</span><br><span class="line">    <span class="comment">//添加shiro的内置过滤器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * anon:无需认证就可以访问</span></span><br><span class="line"><span class="comment">    * authc:必须认证才能访问</span></span><br><span class="line"><span class="comment">    * user：必须拥有&#x27;记住我&#x27;功能才能用</span></span><br><span class="line"><span class="comment">    * perms:拥有某个资源的权限才能访问</span></span><br><span class="line"><span class="comment">    * role:拥有某个角色权限才能访问</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    Map&lt;String,String&gt; filterMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"> </span><br><span class="line">    bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置登录页面请求</span></span><br><span class="line">    bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-28%20%E4%B8%8B%E5%8D%888.49.17.png" alt="截屏2022-01-28 下午8.49.17"></p>
<h5 id="3-Shiro实现用户认证"><a href="#3-Shiro实现用户认证" class="headerlink" title="3.Shiro实现用户认证"></a>3.Shiro实现用户认证</h5><blockquote>
<p>修改MyController.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(String username, String password, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//获取当前的用户</span></span><br><span class="line">    Subject subject = SecurityUtils.getSubject();</span><br><span class="line">    <span class="comment">//封装用户的登录数据</span></span><br><span class="line">    UsernamePasswordToken token = <span class="keyword">new</span> UsernamePasswordToken(username, password);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        subject.login(token);<span class="comment">//执行登录方法，如果没有异常就说明OK了</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;<span class="comment">//用户名不存在</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;用户名错误&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;<span class="comment">//密码错误</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;密码错误&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改UserRealm.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthenticationInfo <span class="title">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行了======》doGetAuthorizationInfo认证&quot;</span>);</span><br><span class="line">    <span class="comment">//用户名，密码，数据中去取</span></span><br><span class="line"></span><br><span class="line">    String name=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">    String password=<span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    UsernamePasswordToken userToken = (UsernamePasswordToken) token;</span><br><span class="line">    <span class="keyword">if</span> (!userToken.getUsername().equals(name))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;<span class="comment">//抛出异常，UnknownAccountException</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//密码认证，shiro来做</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SimpleAuthenticationInfo(<span class="string">&quot;&quot;</span>,password,<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>测试结果</p>
</blockquote>
<p>==成功==</p>
<p><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-28%20%E4%B8%8B%E5%8D%889.18.15.png" alt="截屏2022-01-28 下午9.18.15"></p>
<p>==失败==</p>
<img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-28%20%E4%B8%8B%E5%8D%889.18.53.png" alt="截屏2022-01-28 下午9.18.53" style="zoom:50%;" />

<img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-28%20%E4%B8%8B%E5%8D%889.19.20.png" alt="截屏2022-01-28 下午9.19.20" style="zoom:50%;" />



<h5 id="4-Shiro实现请求授权"><a href="#4-Shiro实现请求授权" class="headerlink" title="4.Shiro实现请求授权"></a>4.Shiro实现请求授权</h5><blockquote>
<p>添加拦截 ==MyController==</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/noauth&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">unAuthorized</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;未经授权无法访问此页面&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>==ShiroConfig.java==</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//授权页面，正常情况下没有授权会跳转到未授权页面</span></span><br><span class="line">filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;perms[user:add]&quot;</span>);</span><br><span class="line">filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置登录页面请求</span></span><br><span class="line">bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//未授权页面</span></span><br><span class="line">bean.setUnauthorizedUrl(<span class="string">&quot;/noauth&quot;</span>);</span><br></pre></td></tr></table></figure>



<img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-29%20%E4%B8%8B%E5%8D%883.04.12.png" alt="截屏2022-01-29 下午3.04.12" style="zoom:50%;" />

<blockquote>
<p> 添加授权功能==UserRealm.java==</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//授权</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> AuthorizationInfo <span class="title">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;执行了======》doGetAuthorizationInfo授权&quot;</span>);</span><br><span class="line"></span><br><span class="line">    SimpleAuthorizationInfo info = <span class="keyword">new</span> SimpleAuthorizationInfo();</span><br><span class="line">    info.addStringPermission(<span class="string">&quot;user:add&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>测试结果</p>
</blockquote>
<img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E6%88%AA%E5%B1%8F2022-01-29%20%E4%B8%8B%E5%8D%883.07.21.png" alt="截屏2022-01-29 下午3.07.21" style="zoom:50%;" />





<h5 id="5-3-退出登录"><a href="#5-3-退出登录" class="headerlink" title="5.3. 退出登录"></a>5.3. 退出登录</h5><ul>
<li>在控制器中添加一个退出登录的方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//退出登录</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/logout&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">logout</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Subject subject = SecurityUtils.getSubject();</span><br><span class="line">    subject.logout();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="10、遇到的问题归纳"><a href="#10、遇到的问题归纳" class="headerlink" title="10、遇到的问题归纳"></a>10、遇到的问题归纳</h3><h4 id="10-1、访问8080端口出现error-page"><a href="#10-1、访问8080端口出现error-page" class="headerlink" title="10.1、访问8080端口出现error page"></a>10.1、访问8080端口出现error page</h4><p>==解决方法：== 导入thynmeleaf依赖，同时去掉@EnableWebMvc</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="10-2、无法访问静态资源"><a href="#10-2、无法访问静态资源" class="headerlink" title="10.2、无法访问静态资源"></a>10.2、无法访问静态资源</h4><p><strong>问题描述：</strong></p>
<p><strong><code>please add some templates or check your Thymeleaf configuration</code></strong></p>
<p>==解决方法：== 在pom中导入如下配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--加载资源目录--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--加载配置文件--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--加载模板文件--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.html<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--加载静态文件--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>/static/<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Levi_Bee</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/05/17/Spring/SpringBoot%E5%AD%A6%E4%B9%A0/">http://example.com/2022/05/17/Spring/SpringBoot学习/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Levi_Bee's World!</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><div class="post_share"><div class="social-share" data-image="https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/17/Spring/Swagger/"><img class="prev-cover" src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/image-20220517194333470.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Swagger</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/17/Spring/Spring/"><img class="next-cover" src="https://www.w3cschool.cn/attachments/image/20170802/1501662448352296.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/05/17/Spring/Swagger/" title="Swagger"><img class="cover" src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/image-20220517194333470.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-17</div><div class="title">Swagger</div></div></a></div><div><a href="/2022/05/17/%E6%8C%81%E4%B9%85%E5%B1%82/MyBatis/" title="Mybatis"><img class="cover" src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E4%B8%8B%E8%BD%BD.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-17</div><div class="title">Mybatis</div></div></a></div><div><a href="/2022/05/17/%E5%89%8D%E7%AB%AF/Vue/" title="Vue"><img class="cover" src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/vue.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-17</div><div class="title">Vue</div></div></a></div><div><a href="/2022/05/17/Spring/Spring/" title="Spring"><img class="cover" src="https://www.w3cschool.cn/attachments/image/20170802/1501662448352296.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-17</div><div class="title">Spring</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/IMG_5475.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Levi_Bee</div><div class="author-info__description">代码🧑🏻‍💻｜烹饪🥙｜运动🏀｜养🐰🐰</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hellolvweibin"><i class="fab fa-github"></i><span>About Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hellolvweibin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:279369954@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">世界很美，抬头看看!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">SpringBoot学习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%8E%9F%E7%90%86%E5%88%9D%E6%8E%A2"><span class="toc-number">1.0.1.</span> <span class="toc-text">1、原理初探</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81yaml"><span class="toc-number">1.0.2.</span> <span class="toc-text">2、yaml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81SpringBoot-Web%E5%BC%80%E5%8F%91"><span class="toc-number">1.0.3.</span> <span class="toc-text">3、SpringBoot Web开发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">3.1、静态资源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2%E3%80%81-%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">3.2、 模版引擎</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3%E3%80%81springmvc%E9%85%8D%E7%BD%AE"><span class="toc-number">1.0.3.3.</span> <span class="toc-text">3.3、springmvc配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.0.4.</span> <span class="toc-text">4、员工管理系统</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%95%B4%E5%90%88JDBC"><span class="toc-number">1.1.</span> <span class="toc-text">5、整合JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.1.</span> <span class="toc-text">1、新建一个新的项目</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81SpringSecurity%EF%BC%88%E5%AE%89%E5%85%A8%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">6、SpringSecurity（安全）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1%E3%80%81%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83"><span class="toc-number">1.2.1.</span> <span class="toc-text">6.1、用户认证和授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2%E3%80%81%E6%B3%A8%E9%94%80%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">6.2、注销以及权限控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3%E3%80%81%E8%AE%B0%E4%BD%8F%E6%88%91%E4%BB%A5%E5%8F%8A%E9%A6%96%E9%A1%B5%E5%AE%9A%E5%88%B6"><span class="toc-number">1.2.3.</span> <span class="toc-text">6.3、记住我以及首页定制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81Shiro"><span class="toc-number">1.3.</span> <span class="toc-text">7、Shiro</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">一、概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">1. 简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">2. 功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BB%8E%E5%A4%96%E9%83%A8%E7%9C%8B"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">3. 从外部看</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">4.认证流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">5. 分析案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-SpringBoot-%E9%9B%86%E6%88%90-Shiro"><span class="toc-number">1.3.2.</span> <span class="toc-text">二、 SpringBoot 集成 Shiro</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1. 编写配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Shiro%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AA"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2.Shiro实现登录拦截</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Shiro%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3.Shiro实现用户认证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-Shiro%E5%AE%9E%E7%8E%B0%E8%AF%B7%E6%B1%82%E6%8E%88%E6%9D%83"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">4.Shiro实现请求授权</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">5.3. 退出登录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%BD%92%E7%BA%B3"><span class="toc-number">1.4.</span> <span class="toc-text">10、遇到的问题归纳</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1%E3%80%81%E8%AE%BF%E9%97%AE8080%E7%AB%AF%E5%8F%A3%E5%87%BA%E7%8E%B0error-page"><span class="toc-number">1.4.1.</span> <span class="toc-text">10.1、访问8080端口出现error page</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2%E3%80%81%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-number">1.4.2.</span> <span class="toc-text">10.2、无法访问静态资源</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/17/%E5%89%8D%E7%AB%AF/Vue/" title="Vue"><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/vue.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue"/></a><div class="content"><a class="title" href="/2022/05/17/%E5%89%8D%E7%AB%AF/Vue/" title="Vue">Vue</a><time datetime="2022-05-17T12:00:00.000Z" title="发表于 2022-05-17 20:00:00">2022-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/17/%E6%8C%81%E4%B9%85%E5%B1%82/MyBatis/" title="Mybatis"><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/%E4%B8%8B%E8%BD%BD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis"/></a><div class="content"><a class="title" href="/2022/05/17/%E6%8C%81%E4%B9%85%E5%B1%82/MyBatis/" title="Mybatis">Mybatis</a><time datetime="2022-05-17T12:00:00.000Z" title="发表于 2022-05-17 20:00:00">2022-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/17/Spring/Swagger/" title="Swagger"><img src="https://raw.githubusercontent.com/hellolvweibin/Typora/main/image-20220517194333470.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Swagger"/></a><div class="content"><a class="title" href="/2022/05/17/Spring/Swagger/" title="Swagger">Swagger</a><time datetime="2022-05-17T11:00:00.000Z" title="发表于 2022-05-17 19:00:00">2022-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/17/Spring/SpringBoot%E5%AD%A6%E4%B9%A0/" title="SpringBoot"><img src="https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot"/></a><div class="content"><a class="title" href="/2022/05/17/Spring/SpringBoot%E5%AD%A6%E4%B9%A0/" title="SpringBoot">SpringBoot</a><time datetime="2022-05-17T03:00:00.000Z" title="发表于 2022-05-17 11:00:00">2022-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/17/Spring/Spring/" title="Spring"><img src="https://www.w3cschool.cn/attachments/image/20170802/1501662448352296.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring"/></a><div class="content"><a class="title" href="/2022/05/17/Spring/Spring/" title="Spring">Spring</a><time datetime="2022-05-17T02:38:00.000Z" title="发表于 2022-05-17 10:38:00">2022-05-17</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://pic1.zhimg.com/v2-5aed21c8ef45942df927ee57dca6c1e7_1440w.jpg?source=172ae18b')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Levi_Bee</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>